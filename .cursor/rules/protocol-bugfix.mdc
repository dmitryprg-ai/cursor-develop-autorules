---
description: –ü—Ä–æ—Ç–æ–∫–æ–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Å Root Cause Analysis
alwaysApply: false
---
# üêõ PROTOCOL: BUG FIX

> **–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑:** `core-master.mdc` –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫
> **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:** –æ—à–∏–±–∫–∞, –±–∞–≥, –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–∞–¥–∞–µ—Ç, exception, error
> **–ë–∞–∑–æ–≤—ã–µ –º–æ–¥—É–ª–∏:** `_base-5wh.mdc`, `_base-confidence.mdc`, `standard-rca.mdc`

---

## Core Principle: FIX ROOT CAUSE, NOT SYMPTOM

```
1. STOP    ‚Üí –û—Å—Ç–∞–Ω–æ–≤–∏—Å—å –ø—Ä–∏ –æ—à–∏–±–∫–µ
2. CAPTURE ‚Üí –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
3. ANALYZE ‚Üí 5 Whys –¥–æ root cause
4. FIX     ‚Üí –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–∞—Ç—á –¥–ª—è root cause
5. VERIFY  ‚Üí –£–±–µ–¥–∏—Å—å —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
6. PREVENT ‚Üí –î–æ–±–∞–≤—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
```

---

## 1. WHEN TO APPLY THIS PROTOCOL

| –°–∏—Ç—É–∞—Ü–∏—è | –ü—Ä–∏–º–µ–Ω—è—Ç—å? |
|----------|-----------|
| –û—à–∏–±–∫–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ | ‚úÖ –î–ê |
| Exception –≤ –∫–æ–¥–µ | ‚úÖ –î–ê |
| –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç | ‚úÖ –î–ê |
| –¢–µ—Å—Ç –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç | ‚úÖ –î–ê |
| AI –∑–∞–≤–∏—Å | ‚úÖ –î–ê ‚Üí —Ç–∞–∫–∂–µ `protocol-freeze-recovery.mdc` |
| Warning –≤ –∫–æ–Ω—Å–æ–ª–∏ | ‚úÖ –î–ê (–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å) |

---

## 2. ERROR CAPTURE TEMPLATE

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π:

```markdown
## üö® ERROR CAPTURED

### Timestamp:
[–∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞]

### Command/Action:
```bash
[exact command that caused error]
```

### Full Error Output:
```
[–ü–û–õ–ù–´–ô –≤—ã–≤–æ–¥ –æ—à–∏–±–∫–∏, –Ω–µ —Å–æ–∫—Ä–∞—â–∞—Ç—å]
```

### Context:
- File: [–∫–∞–∫–æ–π —Ñ–∞–π–ª —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª]
- Action: [—á—Ç–æ –ø—ã—Ç–∞–ª—Å—è —Å–¥–µ–ª–∞—Ç—å]
- Prior steps: [—á—Ç–æ –¥–µ–ª–∞–ª –¥–æ —ç—Ç–æ–≥–æ]
```

---

## 3. ROOT CAUSE ANALYSIS (5 Whys)

–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –∏–∑ `_base-5wh.mdc`:

```markdown
## üîç 5 WHYS ANALYSIS

### Problem: [symptom description]

**Why 1:** [–ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç ‚Äî –æ–±—ã—á–Ω–æ —Å–∏–º–ø—Ç–æ–º]
‚Üì
**Why 2:** [–∫–æ–ø–∞–µ–º –≥–ª—É–±–∂–µ]
‚Üì
**Why 3:** [–µ—â—ë –≥–ª—É–±–∂–µ]
‚Üì
**Why 4:** [–ø—Ä–∏–±–ª–∏–∂–∞–µ–º—Å—è –∫ –ø—Ä–∏—á–∏–Ω–µ]
‚Üì
**Why 5:** [ROOT CAUSE]

### üéØ Root Cause:
[–ß—ë—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—Ä–∏—á–∏–Ω—ã]

### üîß Fix:
[–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è ROOT CAUSE]
```

---

## 4. COMMON ERROR PATTERNS

### Quick Reference:

| Error Type | Common Root Cause | Fix Approach |
|------------|-------------------|--------------|
| `ModuleNotFoundError` | –ù–µ –≤ .venv –∏–ª–∏ missing in requirements.txt | `pip install` + add to requirements |
| `ImportError` | Wrong path, circular import | Fix import path |
| `TypeError` | Wrong data structure assumption | Check actual types |
| `500 Error` | Unhandled exception | Add error handling |
| `Timeout` | Infinite loop, slow query | Add limits, optimize |
| `Permission denied` | File/folder permissions | chmod, check path |
| `Connection refused` | Service not running | Start service |

### Error Priority Matrix:

| Priority | Description | Action |
|----------|-------------|--------|
| üî¥ CRITICAL (1-2) | Blocks all work | STOP immediately, fix first |
| üü† HIGH (3-5) | Major functionality broken | Fix before next command |
| üü° MEDIUM (6-7) | Feature works with issues | Fix or document |
| üü¢ LOW (8-10) | Minor/cosmetic | Document for later |

---

## 5. FIX IMPLEMENTATION

### Rules:

1. **Minimal fix** ‚Äî —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç root cause
2. **One change at a time** ‚Äî –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—â–µ–π —Å—Ä–∞–∑—É
3. **Test after fix** ‚Äî –∑–∞–ø—É—Å—Ç–∏ —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É –∏ —É–±–µ–¥–∏—Å—å —á—Ç–æ –æ—à–∏–±–∫–∏ –Ω–µ—Ç
4. **No workarounds** ‚Äî –µ—Å–ª–∏ workaround –Ω–µ–æ–±—Ö–æ–¥–∏–º, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π

### Fix Template:

```markdown
## üîß FIX APPLIED

### What was changed:
```diff
- old code
+ new code
```

### Why this fixes root cause:
[–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ]

### Verification:
```bash
[command to verify fix]
```

### Result:
‚úÖ Fixed / ‚ùå Still failing
```

---

## 6. VERIFICATION PROTOCOL

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:

1. **Re-run the exact same command** that caused the error
2. **Check for side effects** ‚Äî –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å –ª–∏ —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ
3. **Run related tests** if available

```markdown
## ‚úÖ FIX VERIFICATION

### Original Error:
[–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]

### Fix Applied:
[—á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–∏]

### Verification:
| Check | Command | Result |
|-------|---------|--------|
| Error gone | [original command] | ‚úÖ/‚ùå |
| No side effects | [related commands] | ‚úÖ/‚ùå |
| Tests pass | [test command] | ‚úÖ/‚ùå |

### Status: ‚úÖ VERIFIED / ‚ùå NEEDS MORE WORK
```

---

## 7. PREVENTION MEASURES

### –ü–æ—Å–ª–µ fix-–∞ —Å–ø—Ä–æ—Å–∏ —Å–µ–±—è:

- [ ] –ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —ç—Ç—É –æ—à–∏–±–∫—É –≤ –±—É–¥—É—â–µ–º?
- [ ] –ù—É–∂–µ–Ω –ª–∏ —Ç–µ—Å—Ç-–∫–µ–π—Å?
- [ ] –ù—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é?
- [ ] –ù—É–∂–Ω–∞ –ª–∏ –∑–∞—â–∏—Ç–∞ –≤ –∫–æ–¥–µ (validation, error handling)?

### Prevention Actions:

```markdown
## üõ°Ô∏è PREVENTION

### Test Case Added:
- [ ] Yes ‚Äî [test file path]
- [ ] No ‚Äî reason: [why not needed]

### Documentation Updated:
- [ ] Yes ‚Äî [doc file path]
- [ ] No ‚Äî reason: [why not needed]

### Code Protection Added:
- [ ] Yes ‚Äî [type of protection]
- [ ] No ‚Äî reason: [why not needed]
```

---

## 8. ERROR LEARNING INTEGRATION

### –ü–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

–ó–∞–ø–∏—Å–∞—Ç—å –≤ `error-learning.mdc` protocol:

```markdown
## ERROR #{N}: [date]

### Symptom:
[—á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ]

### Root Cause:
[–ø–æ—á–µ–º—É –ø—Ä–æ–∏–∑–æ—à–ª–æ]

### Fix:
[–∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏–ª–∏]

### Prevention:
[–∫–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤ –±—É–¥—É—â–µ–º]

### Design Injection:
[–∫–∞–∫–æ–π guidance –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏]
```

---

## 9. ANTI-PATTERNS (AVOID)

### ‚ùå Fixing symptoms:
```
WRONG: –î–æ–±–∞–≤–∏—Ç—å try/except —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å –æ—à–∏–±–∫—É
RIGHT: –ù–∞–π—Ç–∏ root cause –∏ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å
```

### ‚ùå Workarounds without documentation:
```
WRONG: "–°–¥–µ–ª–∞—é –ø–æ-–¥—Ä—É–≥–æ–º—É, —Ç–∞–∫ –ø—Ä–æ—â–µ"
RIGHT: –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ—á–µ–º—É workaround –∏ –∫–æ–≥–¥–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
```

### ‚ùå Ignoring recurring errors:
```
WRONG: "–û–ø—è—Ç—å —ç—Ç–∞ –æ—à–∏–±–∫–∞, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—â—É"
RIGHT: –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è ‚Äî –≥–ª—É–±–∂–µ RCA
```

### ‚ùå Multiple fixes at once:
```
WRONG: –ò—Å–ø—Ä–∞–≤–∏—Ç—å 5 –≤–µ—â–µ–π —Å—Ä–∞–∑—É –∏ –Ω–∞–¥–µ—è—Ç—å—Å—è —á—Ç–æ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç
RIGHT: –û–¥–∏–Ω fix ‚Üí test ‚Üí —Å–ª–µ–¥—É—é—â–∏–π fix
```

---

## 10. CONFIDENCE CALIBRATION

–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É –∏–∑ `_base-confidence.mdc`:

```
Base: 100%
- Root cause –Ω–µ –Ω–∞–π–¥–µ–Ω (—Ç–æ–ª—å–∫–æ symptom fix): -60%
- Fix –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω: -50%
- –ù–µ—Ç verification: -40%
- –ù–µ—Ç prevention measures: -20%
```

---
**–í–µ—Ä—Å–∏—è:** 1.0
**–°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:** `_base-5wh.mdc`, `standard-rca.mdc`, `error-learning.mdc`
