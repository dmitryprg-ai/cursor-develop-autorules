---
description: "–ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫, –±–∞–≥–æ–≤, exceptions. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: –æ—à–∏–±–∫–∞, –±–∞–≥, –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–∞–¥–∞–µ—Ç, error. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç 5 Whys –¥–ª—è Root Cause Analysis, —Ç—Ä–µ–±—É–µ—Ç fix –∫–æ—Ä–Ω–µ–≤–æ–π –ø—Ä–∏—á–∏–Ω—ã, –Ω–µ —Å–∏–º–ø—Ç–æ–º–∞."
globs: 
alwaysApply: false
tags: [bugfix, debugging, rca]
---

# üêõ PROTOCOL: BUG FIX

## Context

- **–ö–æ–≥–¥–∞:** –û—à–∏–±–∫–∏, –±–∞–≥–∏, exceptions, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:** –æ—à–∏–±–∫–∞, –±–∞–≥, –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–∞–¥–∞–µ—Ç, error
- **–ü—Ä–∏–Ω—Ü–∏–ø:** FIX ROOT CAUSE, NOT SYMPTOM

---

## Requirements

### Workflow

<required>
  1. STOP ‚Üí –û—Å—Ç–∞–Ω–æ–≤–∏—Å—å –ø—Ä–∏ –æ—à–∏–±–∫–µ
  2. CAPTURE ‚Üí –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
  3. ANALYZE ‚Üí 5 Whys –¥–æ root cause
  4. FIX ‚Üí –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–∞—Ç—á –¥–ª—è root cause
  5. VERIFY ‚Üí –£–±–µ–¥–∏—Å—å —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
  6. PREVENT ‚Üí –î–æ–±–∞–≤—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
</required>

### Error Capture Template

```markdown
## üö® ERROR CAPTURED

**Command:** [—á—Ç–æ –≤—ã–∑–≤–∞–ª–æ –æ—à–∏–±–∫—É]
**Error Output:**
```
[–ü–û–õ–ù–´–ô –≤—ã–≤–æ–¥, –Ω–µ —Å–æ–∫—Ä–∞—â–∞—Ç—å]
```
**Context:** File: [—Ñ–∞–π–ª], Action: [—á—Ç–æ –¥–µ–ª–∞–ª]
```

### Root Cause Analysis (5 Whys)

```markdown
### Problem: [symptom]

**Why 1:** [–æ—Ç–≤–µ—Ç]
‚Üì
**Why 5:** [ROOT CAUSE]

### üéØ Root Cause: [—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞]
### üîß Fix: [–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ]
```

### Common Error Patterns

| Error Type | Root Cause | Fix |
|------------|------------|-----|
| `ModuleNotFoundError` | –ù–µ –≤ .venv / missing package | `pip install` + requirements |
| `TypeError` | Wrong data type assumption | Check actual types |
| `500 Error` | Unhandled exception | Add error handling |
| `Connection refused` | Service not running | Start service |

---

## Examples

<example>
GOOD: 5 Whys –¥–æ root cause
```markdown
### Problem: API 500 error

**Why 1:** Exception –≤ endpoint
‚Üì
**Why 2:** Query –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
‚Üì
**Why 3:** Connection pool –∏—Å—á–µ—Ä–ø–∞–Ω
‚Üì
**Why 4:** Connections –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
‚Üì
**Why 5:** –ù–µ—Ç finally –±–ª–æ–∫–∞

### üéØ Root Cause: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç cleanup
### üîß Fix: finally { connection.close() }
```
</example>

<example type="invalid">
BAD: Fix —Å–∏–º–ø—Ç–æ–º–∞
```
–î–æ–±–∞–≤–ª—é try/except —á—Ç–æ–±—ã –Ω–µ –ø–∞–¥–∞–ª–æ.
```
–ü—Ä–æ–±–ª–µ–º–∞: –°–∫—Ä—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É, –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏—á–∏–Ω—É.
</example>

---

## Critical Points

<critical>
  - MINIMAL FIX ‚Äî —Ç–æ–ª—å–∫–æ —Ç–æ —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç root cause
  - ONE CHANGE AT A TIME ‚Äî –Ω–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å—Ä–∞–∑—É
  - TEST AFTER FIX ‚Äî –∑–∞–ø—É—Å—Ç–∏ —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É
  - NO WORKAROUNDS ‚Äî –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π
</critical>

### Anti-patterns

- ‚ùå try/except —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å –æ—à–∏–±–∫—É
- ‚ùå Workaround –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚ùå –ù–µ—Å–∫–æ–ª—å–∫–æ fix-–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚ùå –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ recurring errors

---

**–í–µ—Ä—Å–∏—è:** 1.1
**–°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:** `_base-5wh.mdc`, `standard-rca.mdc`, `error-learning.mdc`
