---
description: "–ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, —Ñ–∏—á, –¥–æ—Ä–∞–±–æ—Ç–æ–∫. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: –¥–æ–±–∞–≤–∏—Ç—å, —Å–æ–∑–¥–∞—Ç—å, –Ω–æ–≤–∞—è —Ñ–∏—á–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å. –í–∫–ª—é—á–∞–µ—Ç Duplicate Check, JTBD Analysis, TDD –ø–æ–¥—Ö–æ–¥, –ø—Ä–æ–≤–µ—Ä–∫—É UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ç–∏–ø–æ–≤."
globs: 
alwaysApply: false
tags: [development, feature, tdd]
---

# üöÄ PROTOCOL: DEVELOPMENT

## Context

- **–ö–æ–≥–¥–∞:** –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —Ñ–∏—á–∏, –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:** –¥–æ–±–∞–≤–∏—Ç—å, —Å–æ–∑–¥–∞—Ç—å, –Ω–æ–≤–∞—è —Ñ–∏—á–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å
- **–ë–∞–∑–æ–≤—ã–µ –º–æ–¥—É–ª–∏:** `_base-jtbd-thinking.mdc`, `_base-rat.mdc`
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã:** `standard-file-size-limits-always.mdc`

<critical>
  - –ü–†–ê–í–ò–õ–û #1: –ü—Ä–æ—á–∏—Ç–∞–π –í–°–Æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ü–ï–†–ï–î –æ—Ç–≤–µ—Ç–æ–º
  - –ü–†–ê–í–ò–õ–û #2: –ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –î–û–õ–ñ–ï–ù —Å–æ–¥–µ—Ä–∂–∞—Ç—å RESPONSE FORMAT
  - –ü–†–ê–í–ò–õ–û #3: –ù–ï –ü–†–û–ü–£–°–ö–ê–ô —à–∞–≥–∏ ‚Äî –µ—Å–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏–ª, –°–¢–û–ü –∏ –≤–µ—Ä–Ω–∏—Å—å
  - –ü–†–ê–í–ò–õ–û #4: –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –Ω–∞–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–æ –∫–∞–∫–æ–π output —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –æ—Ç —ç—Ç–æ–≥–æ —à–∞–≥–∞ –∫–∞–∫ —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ç—ã –µ–≥–æ –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏–ª
  - –ü–†–ê–í–ò–õ–û #5: –£–±–µ–¥–∏—Å—å —á—Ç–æ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã Backend –∏ Frontend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∏.
  - –ü–†–ê–í–ò–õ–û #6: –ü—Ä–æ–µ–∫—Ç–∏—Ä—É—è –ª–æ–≥–∏–∫—É –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏–∑—É—á–∏ –∏ —Å–æ–±–ª—é–¥–∞–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç .cursor/rules/standard-file-size-limits-always.mdc
</critical>

---

## Requirements

### Step 1: PRE-ACTION

<required>
  1. **Duplicate Check** ‚Äî –∏—Å–∫–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
  2. **JTBD Analysis** ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å Job –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  3. **Find Working Example** ‚Äî –¥–ª—è UI –Ω–∞–π—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ
  4. **Control File Size** ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏—Å—Ö–æ–¥—è –∏–∑ –ø—Ä–∞–≤–∏–ª–∞, —á—Ç–æ –≤—Å—é –ª–æ–≥–∏–∫—É –Ω–µ —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª
</required>

#### Duplicate Check Template

```markdown
## üîç DUPLICATE CHECK
**Target:** [—á—Ç–æ —Å–æ–∑–¥–∞—é]
**Search:** semantic/grep/file ‚Üí [found/not found]
**Decision:** CREATE NEW / EXTEND EXISTING / ASK USER
```

#### JTBD Analysis Template

```markdown
## üéØ JTBD ANALYSIS
**Job Story:** –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç [–∫–æ–Ω—Ç–µ–∫—Å—Ç_–∑–∞–¥–∞—á–∏], –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç [–¥–µ–π—Å—Ç–≤–∏–µ], —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å [—Ä–µ–∑—É–ª—å—Ç–∞—Ç] –∏ [–≤—ã–≥–æ–¥–∞]
**3 –≤–æ–ø—Ä–æ—Å–∞:**
1. –ö–∞–∫—É—é –∑–∞–¥–∞—á—É –æ–Ω —Ä–µ—à–∞–µ—Ç? ‚Üí [–æ—Ç–≤–µ—Ç]
2. –ß—Ç–æ –º–µ—à–∞–µ—Ç? ‚Üí [–æ—Ç–≤–µ—Ç]
3. –ö–∞–∫–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –µ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç? ‚Üí [–æ—Ç–≤–µ—Ç]
```

### Step 2: PLAN

```markdown
## üìã DEVELOPMENT PLAN
**Task:** [—á—Ç–æ —Å–¥–µ–ª–∞—Ç—å]
**Expected Output:** [–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã]
**Test Cases:** [input ‚Üí expected output]
```

### Step 3: EXECUTE (TDD)

<required>
  1. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç-–∫–µ–π—Å—ã (–¥–æ–ª–∂–Ω—ã –ü–ê–î–ê–¢–¨)
  2. –ù–∞–ø–∏—Å–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
  3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã (–¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏)
  4. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –≤ –∫–æ—Ç–æ—Ä—ã–µ –≤–Ω–æ—Å–∏–ª–∏—Å—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
</required>

### Step 4: VERIFY

```markdown
## ‚úÖ VERIFICATION
- [ ] 0 linter errors
- [ ] Tests pass
- [ ] JTBD: Job —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, UI –ø—Ä–æ –≤—ã–≥–æ–¥—ã
- [ ] Each file opened and verified
```

---

## Common Pitfalls (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ)

### UI Components

<critical>
  - –ù–ê–ô–î–ò —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä–∏–º–µ—Ä –≤ –ø—Ä–æ–µ–∫—Ç–µ ‚Üí —Å–∫–æ–ø–∏—Ä—É–π –ø–∞—Ç—Ç–µ—Ä–Ω
  - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π CSS-–∫–ª–∞—Å—Å—ã –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—Ç–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ç–µ–∫—É—â–µ–º —Å—Ç–µ–∫–µ
  - WHY: Responsive –∫–ª–∞—Å—Å—ã –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö CSS-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
</critical>

### Type Consistency (API Integration)

<critical>
  - Database types –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç JSON types (bigint ‚Üí string)
  - Map/Set —Ç—Ä–µ–±—É—é—Ç EXACT type match
  - WHY: –ë–∞–≥–∏ –∏–∑-–∑–∞ type mismatch (id: string vs number)
</critical>

### Backend Module Creation (–æ–±—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω)

```
1. types ‚Üí 2. repository/data-access ‚Üí 3. service/business-logic ‚Üí 4. routes/controllers
```

### External API Integration

<critical>
  - –ü–æ–ª—è —Ç–∏–ø–∞ "–°–ø–∏—Å–æ–∫"/"Enum" –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å ID, –Ω–µ —Ç–µ–∫—Å—Ç
  - –ù—É–∂–µ–Ω –º–∞–ø–ø–∏–Ω–≥ ID ‚Üí —Ç–µ–∫—Å—Ç
  - WHY: –ü–æ–ª–µ —Å–æ–¥–µ—Ä–∂–∞–ª–æ ID –≤–º–µ—Å—Ç–æ —á–∏—Ç–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
</critical>

### Entry Point Flow

<critical>
  - –ò—Å–ø–æ–ª—å–∑—É–π –í–´–°–û–ö–û–£–†–û–í–ù–ï–í–´–ô —Å–µ—Ä–≤–∏—Å (orchestrator)
  - –ù–ï –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã –Ω–∞–ø—Ä—è–º—É—é
  - WHY: Scheduled task –º–æ–∂–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é
</critical>

---

## Examples

<example>
GOOD: –ü–æ–ª–Ω—ã–π flow —Å JTBD
```markdown
## üîç DUPLICATE CHECK
Target: DateFilter –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
Search: grep ‚Üí not found
Decision: CREATE NEW

## üéØ JTBD ANALYSIS
Job Story: –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—â–µ—Ç —Å–¥–µ–ª–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –≤—ã–±—Ä–∞—Ç—å –¥–∞—Ç—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–¥–µ–ª–∞—Ç—å –Ω—É–∂–Ω—ã–µ –≤—ã–≤–æ–¥—ã
1. –ö–∞–∫—É—é –∑–∞–¥–∞—á—É –æ–Ω —Ä–µ—à–∞–µ—Ç? ‚Üí –ù–∞–π—Ç–∏ –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
2. –ß—Ç–æ –º–µ—à–∞–µ—Ç? ‚Üí –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞
3. –ö–∞–∫–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –µ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç? ‚Üí –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ –∑–∞ 3 –∫–ª–∏–∫–∞

[–†–µ–∞–ª–∏–∑–∞—Ü–∏—è...]
```
</example>

<example type="invalid">
BAD: –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫
```
–°–æ–∑–¥–∞—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç DateFilter...
```
–ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–∂–µ—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å, –Ω–µ –ø–æ–Ω—è—Ç–µ–Ω Job.
</example>

---

## Critical Points

<critical>
  - DUPLICATE CHECK –ø–µ—Ä–µ–¥ –õ–Æ–ë–´–ú —Å–æ–∑–¥–∞–Ω–∏–µ–º
  - JTBD ANALYSIS –¥–ª—è user-facing —Ñ–∏—á
  - FIND WORKING EXAMPLE –¥–ª—è UI
  - Production deployment = –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã
  - Check Service Resrart = –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã, –≤ –∫–æ—Ç–æ—Ä—ã–µ –≤–Ω–æ—Å–∏–ª–∏—Å—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
</critical>

---

**–í–µ—Ä—Å–∏—è:** 2.3
**–°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:** `_base-jtbd-thinking.mdc`, `standard-tdd.mdc`, `standard-qa.mdc`
