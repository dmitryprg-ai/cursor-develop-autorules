---
description: –ü—Ä–æ—Ç–æ–∫–æ–ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–∏—Å–∞–Ω–∏—è AI –∞–≥–µ–Ω—Ç–∞
alwaysApply: false
---
# ‚ùÑÔ∏è PROTOCOL: FREEZE RECOVERY

> **–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑:** `core-master.mdc` –ø—Ä–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–∏ AI
> **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:** –∑–∞–≤–∏—Å, –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, freeze, –∑–∞—Ü–∏–∫–ª–∏–ª—Å—è, –ø—Ä–µ—Ä–≤–∞–ª
> **–ë–∞–∑–æ–≤—ã–µ –º–æ–¥—É–ª–∏:** `standard-rca.mdc`, `_base-5wh.mdc`

---

## Core Principle: UNDERSTAND BEFORE RETRY

```
–ö–æ–≥–¥–∞ –∑–∞–≤–∏—Å–∞–µ—à—å:
1. –ù–ï –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–π –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–∏—Å
2. –ü–†–û–í–ï–†–¨ —á—Ç–æ —Ç—ã –∑–∞–ø—É—Å–∫–∞–ª –∏ –∫–∞–∫
3. –ù–ê–ô–î–ò –ø–æ—á–µ–º—É —Ç—ã –∑–∞–≤–∏—Å
4. –ò–°–ü–†–ê–í–¨ –ø—Ä–∏—á–∏–Ω—É
5. –¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –ø–æ–≤—Ç–æ—Ä—è–π
```

---

## 1. IMMEDIATE ACTIONS

### –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∞–Ω–∏—è:

```markdown
## ‚ùÑÔ∏è FREEZE DETECTED

### –ß—Ç–æ —è –¥–µ–ª–∞–ª –∫–æ–≥–¥–∞ –∑–∞–≤–∏—Å:
[–æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π]

### –ö–∞–∫—É—é –∫–æ–º–∞–Ω–¥—É/–∫–æ–¥ –∑–∞–ø—É—Å–∫–∞–ª:
```bash
[exact command or code]
```

### –ö–∞–∫ –¥–æ–ª–≥–æ —Ä–∞–±–æ—Ç–∞–ª–æ –¥–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è:
[–≤—Ä–µ–º—è]

### –ß—Ç–æ –≤–∏–¥–µ–ª –ø–µ—Ä–µ–¥ –∑–∞–≤–∏—Å–∞–Ω–∏–µ–º:
[–ø–æ—Å–ª–µ–¥–Ω–∏–π output]
```

---

## 2. ROOT CAUSE ANALYSIS

### –ü—Ä–∏–º–µ–Ω–∏—Ç—å 5 Whys –∏–∑ `_base-5wh.mdc`:

```markdown
## üîç FREEZE RCA

### Symptom: AI –∑–∞–≤–∏—Å –ø—Ä–∏ [action]

**Why 1:** [—á—Ç–æ –¥–µ–ª–∞–ª]
‚Üì
**Why 2:** [–ø–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –∑–∞–≤–∏—Å–∞–Ω–∏—é]
‚Üì
**Why 3:** [–≥–ª—É–±–∂–µ]
‚Üì
**Why 4:** [–µ—â—ë –≥–ª—É–±–∂–µ]
‚Üì
**Why 5:** [ROOT CAUSE]

### Root Cause:
[–∫–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ –∑–∞–≤–∏—Å–∞–Ω–∏—è]
```

---

## 3. COMMON FREEZE PATTERNS

| Pattern | Symptoms | Root Cause | Fix |
|---------|----------|------------|-----|
| **Infinite Loop** | CPU 100%, no progress | Loop –±–µ–∑ exit condition | Add break condition |
| **Large File Read** | Memory grows, then freeze | Trying to load huge file at once | Stream/chunk reading |
| **Network Timeout** | Long wait, then error | API not responding | Add timeout, retry logic |
| **Blocking Operation** | No response | Sync operation blocks event loop | Make async |
| **Database Lock** | Hanging query | Table/row locked | Check locks, add timeout |
| **Memory Exhaustion** | Slow, then crash | Processing too much data | Batch processing |

---

## 4. RECOVERY CHECKLIST

```markdown
## ‚úÖ FREEZE RECOVERY CHECKLIST

### Immediate:
- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ running processes
- [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–ª (exact command)
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª—é–±–æ–π partial output

### Analysis:
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∑–∞–≤–∏—Å–∞–Ω–∏—è (—Å–º. —Ç–∞–±–ª–∏—Ü—É patterns)
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ 5 Whys RCA
- [ ] –ù–∞–π—Ç–∏ root cause

### Prevention:
- [ ] –î–æ–±–∞–≤–∏—Ç—å timeout –≥–¥–µ –Ω—É–∂–Ω–æ
- [ ] –î–æ–±–∞–≤–∏—Ç—å progress logging
- [ ] –î–æ–±–∞–≤–∏—Ç—å early exit conditions
- [ ] –£–º–µ–Ω—å—à–∏—Ç—å batch size –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### Retry:
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å fix –¥–ª—è root cause
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç
```

---

## 5. PREVENTION MEASURES

### –î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π:

#### 5.1. Timeouts
```python
# ‚úÖ ALWAYS add timeout for network operations
import requests
response = requests.get(url, timeout=30)  # 30 seconds timeout

# ‚úÖ Database operations
cursor.execute("SET statement_timeout = '30s';")
```

#### 5.2. Progress Logging
```python
# ‚úÖ Log progress for long operations
for i, item in enumerate(large_list):
    if i % 1000 == 0:
        print(f"Progress: {i}/{len(large_list)} ({i/len(large_list)*100:.1f}%)")
    process(item)
```

#### 5.3. Batch Processing
```python
# ‚ùå WRONG: Load all at once
all_data = load_everything()

# ‚úÖ RIGHT: Process in batches
for batch in chunk_iterator(data, batch_size=1000):
    process_batch(batch)
```

#### 5.4. Early Exit Conditions
```python
# ‚úÖ Add max iterations
max_iterations = 10000
for i in range(max_iterations):
    if condition_met:
        break
    process()
else:
    print("WARNING: Max iterations reached")
```

---

## 6. DESIGN INJECTION ANALYSIS

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–∏—Å–∞–Ω–∏—è –Ω–∞–π–¥–∏:

```markdown
## üéØ DESIGN INJECTION ANALYSIS

### Chain of Reasoning:
1. [Step 1 –º–æ–µ–≥–æ –º—ã—à–ª–µ–Ω–∏—è]
2. [Step 2] ‚Üê üö® –ó–î–ï–°–¨ –°–í–ï–†–ù–£–õ –ù–ï –¢–£–î–ê
3. [Step 3 –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è]

### What I Missed:
- –ù–µ –ø—Ä–æ–≤–µ—Ä–∏–ª: [—á—Ç–æ]
- –ù–µ –ø—Ä–æ—á–∏—Ç–∞–ª: [file/documentation]
- –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏: [–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ]

### What Guidance Was Missing:
- Need: [–∫–∞–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω—É–∂–Ω–∞]
- Location: [–≥–¥–µ –¥–æ–±–∞–≤–∏—Ç—å]
- Format: [–∫–∞–∫ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å]

### Proposed AI Guidance:
```
[–ù–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–ª–æ –±—ã —ç—Ç–æ –∑–∞–≤–∏—Å–∞–Ω–∏–µ]
```
```

---

## 7. FREEZE RECOVERY REPORT

```markdown
## ‚ùÑÔ∏è FREEZE RECOVERY REPORT

### Incident:
- When: [timestamp]
- What: [—á—Ç–æ –¥–µ–ª–∞–ª]
- Duration: [–∫–∞–∫ –¥–æ–ª–≥–æ –≤–∏—Å–µ–ª]

### Root Cause:
[–∫–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞]

### Fix Applied:
[—á—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª]

### Prevention:
[—á—Ç–æ –¥–æ–±–∞–≤–∏–ª —á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–ª–æ—Å—å]

### Design Injection:
[–∫–∞–∫–æ–π guidance –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏]

### Status: ‚úÖ RECOVERED / ‚ö†Ô∏è PARTIAL / ‚ùå NEEDS HELP
```

---

## 8. INTEGRATION WITH ERROR LEARNING

–ü–æ—Å–ª–µ recovery –∑–∞–ø–∏—Å–∞—Ç—å –≤ `error-learning.mdc`:

```markdown
## FREEZE #{N}: [date]

### Symptom:
AI –∑–∞–≤–∏—Å –ø—Ä–∏ [action]

### Root Cause:
[–ø–æ—á–µ–º—É –∑–∞–≤–∏—Å]

### Fix:
[–∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏–ª]

### Prevention Added:
- [ ] Timeout: [where]
- [ ] Logging: [where]
- [ ] Batch size: [what changed]

### Design Injection:
File: [–∫–∞–∫–æ–π —Ñ–∞–π–ª –æ–±–Ω–æ–≤–∏—Ç—å]
Add: [—á—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å]
```

---

## 9. CONFIDENCE CALIBRATION

```
Base: 100%
- Root cause –Ω–µ –Ω–∞–π–¥–µ–Ω: -70%
- Fix –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω: -50%
- Prevention –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω: -30%
- –¢–∞–∫–æ–π –∂–µ freeze –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å—Å—è: -60%
```

---
**–í–µ—Ä—Å–∏—è:** 1.0
**–°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:** `standard-rca.mdc`, `_base-5wh.mdc`, `error-learning.mdc`
